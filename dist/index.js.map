{"version":3,"sources":["../src/types/communications/endpoint-payloads/verify-otp.payloads.ts","../src/types/generic/endpoints/endpoint.interface.ts","../src/types/communications/endpoint-payloads/resend-otp.payloads.ts","../src/types/customers/models/customer.model.ts","../src/types/customers/endpoint-payloads/login.payloads.ts","../src/types/customers/endpoint-payloads/fetch-profile.payloads.ts","../src/types/customers/endpoint-payloads/reserve-email.payloads.ts","../src/types/customers/endpoint-payloads/get-access-token.payloads.ts","../src/types/customers/endpoint-payloads/reset-password.payloads.ts","../src/types/customers/endpoint-payloads/create-store.payloads.ts"],"sourcesContent":["import { HttpStatusCode } from \"axios\";\nimport { BazeError, Endpoint, HttpMethods } from \"../../generic\";\n\nexport enum OtpContext {\n\tVerifyPhoneNumber = 'verify-phone-number',\n\tResetPassword = 'reset-password',\n}\n\nexport interface IVerifyOtpPayload {\n    context: OtpContext;\n    token: string;\n}\n\nexport interface IVerifyOtpWithoutAuthPayload {\n\tcontext: OtpContext;\n\ttoken: string;\n\tphoneNumber: string;\n}\n\nexport interface IVerifyOtpResponse {\n    status: boolean;\n    token: string;\n    refreshToken: string;\n}\n\nexport const OtpVerificationErrors: {\n    invalidOtp: BazeError,\n\tretriesUsedUp: BazeError,\n} = {\n\tinvalidOtp: {\n\t\tstatusCode: HttpStatusCode.BadRequest,\n        code: 'INVALID_OTP',\n\t\tmessage: `This transaction is either invalid or expired`,\n\t\trecommendedActions: [\n\t\t\t`Request a new OTP`\n\t\t]\n\t},\n\tretriesUsedUp: {\n\t\tstatusCode: HttpStatusCode.TooManyRequests,\n        code: 'RETRIES_USED_UP',\n\t\tmessage: `You've tried too many times. Please request a new OTP`,\n\t\trecommendedActions: [\n\t\t\t`Request a new OTP`\n\t\t]\n\t}\n};\n\nexport const VerifyOtpEndpoint: Endpoint = {\n    path: '/otps',\n    fullPath: '/communications/otps',\n    parentModule: '/communications',\n    method: HttpMethods.Patch\n}","export enum HttpMethods {\n\tPost = 'POST',\n\tPut = 'PUT',\n\tGet = 'GET',\n\tPatch = 'PATCH',\n\tDelete = 'DELETE'\n}\n\nexport interface Endpoint {\n\tpath: string;\n\tfullPath?: string;\n    parentModule?: string;\n\tmethod: HttpMethods;\n}","import { Endpoint, HttpMethods } from \"../../generic\";\n\nexport const ResendOtpForPhoneVerificationEndpoint: Endpoint = {\n    path: '/otps/phone-verification',\n    fullPath: '/communications/otps/phone-verification',\n    parentModule: '/communications',\n    method: HttpMethods.Patch\n}\n\nexport const ResendOtpForPasswordResetEndpoint: Endpoint = {\n    path: '/otps/password-reset',\n    fullPath: '/communications/otps/password-reset',\n    parentModule: '/communications',\n    method: HttpMethods.Patch\n}","import { IBase } from \"../../generic\";\n\nexport interface IPassword extends IBase {\n    token: string;\n\thint: string;\n\tisActive: boolean\n}\n\nexport enum CustomerAccountStatus {\n    EmailReserved = 'email-reserved',\n    Inactive = 'inactive',\n    Deactivated = 'deactivated',\n    Active = 'active'\n}\n\nexport interface ICustomer extends IBase {\n\tstatus: CustomerAccountStatus;\n    email: string;\n    fullName: string;\n    phoneNumber: string;\n    passwords?: Array<IPassword>;\n\tphoneVerified: boolean;\n    hasCreatedStore: boolean;\n}","import { HttpStatusCode } from \"axios\";\nimport { BazeError, Endpoint, HttpMethods } from \"../../generic\";\n\nexport interface ILoginPayload {\n    email: string;\n    password: string;\n}\n\nexport interface ILoginResponse {\n    token: string;\n    refreshToken: string;\n}\n\nexport const LoginErrors: {\n    invalidEmailOrPassword: BazeError;\n    deactivatedAccount: BazeError;\n} = {\n\tinvalidEmailOrPassword: {\n\t\tstatusCode: HttpStatusCode.Unauthorized,\n        code: 'INVALID_EMAIL_OR_PASSWORD',\n\t\tmessage: `The email or password you provided is invalid`,\n\t\trecommendedActions: [\n\t\t\t`Ensure that all your credentials are correct.`,\n\t\t\t`If you're sure that they're correct then you should probably use the \"Forgot Password\" toolkit`\n\t\t]\n\t},\n\tdeactivatedAccount: {\n\t\tstatusCode: HttpStatusCode.Unauthorized,\n        code: 'DEACTIVATED_ACCOUNT',\n\t\tmessage: `Your account has been deactivated`,\n\t\trecommendedActions: [\n\t\t\t`Reach out to support to find out why it was deactivated`\n\t\t]\n\t}\n};\n\nexport const LoginEndpoint: Endpoint = {\n    path: '/auth',\n    fullPath: '/customers/auth',\n    parentModule: '/customers',\n    method: HttpMethods.Patch\n}","import { HttpStatusCode } from \"axios\";\nimport { BazeError, Endpoint, HttpMethods } from \"../../generic\";\nimport { ICustomer } from \"../models\";\n\nexport interface IFetchProfileResponse {\n    customer: ICustomer\n}\n\nexport const FetchProfileErrors: {\n    invalidCustomer: BazeError\n} = {\n\tinvalidCustomer: {\n\t\tstatusCode: HttpStatusCode.BadRequest,\n        code: 'INVALID_CUSTOMER',\n\t\tdata: null,\n\t\tmessage: `Invalid customer requested`,\n\t\trecommendedActions: [\n\t\t\t`Contact support`\n\t\t]\n\t}\n};\n\nexport const ProfileEndpoint: Endpoint = {\n    path: '/profile',\n    fullPath: '/customers/profile',\n    parentModule: '/customers',\n    method: HttpMethods.Patch\n}","import { HttpStatusCode } from \"axios\";\nimport { BazeError, Endpoint, HttpMethods } from \"../../generic\";\nimport { ICustomer } from \"../models\";\n\nexport interface IReserveEmailPayload {\n    email: string;\n    phoneNumber: string;\n    password: string;\n    fullName: string;\n}\n\nexport interface IReserveEmailResponse {\n    customer: ICustomer;\n    token: string;\n}\n\nexport type PhoneOrEmail = 'phone' | 'email';\n\nexport const ReserveEmailErrors: {\n    compromisedPassword: ( changeDate: Date ) => BazeError;\n    duplicateCustomerDetected: ( d: PhoneOrEmail ) => BazeError;\n    invalidPhoneNumber: BazeError;\n\tcouldNotSendOtp: BazeError;\n} = {\n\tinvalidPhoneNumber: {\n\t\tstatusCode: HttpStatusCode.BadRequest,\n        code: 'INVALID_PHONE_NUMBER',\n\t\tmessage: `Your phone number isn't quite what we're expecting`,\n\t\trecommendedActions: [\n\t\t\t`Ensure you're providing a proper mobile number`\n\t\t]\n\t},\n\tduplicateCustomerDetected: ( d: PhoneOrEmail ) => {\n\t\treturn {\n\t\t\tstatusCode: HttpStatusCode.BadRequest,\n            code: 'DUPLICATE_CUSTOMER_DETECTED',\n\t\t\tmessage: `The ${d} you provided is already taken please provide another one or retrieve your account`,\n\t\t\trecommendedActions: [\n\t\t\t\t`Confirm that your ${d} is correct`,\n\t\t\t\t`If you're sure it's correct then that probably means you already have an account. Try using the account recovery tool`,\n\t\t\t\t`Provide entirely different details`\n\t\t\t]\n\t\t};\n\t},\n\tcompromisedPassword( changeDate: Date ) {\n\t\treturn {\n\t\t\tstatusCode: HttpStatusCode.BadRequest,\n            code: 'COMPROMISED_PASSWORD',\n\t\t\tmessage: `This password is compromised. It was changed on ${changeDate.toDateString()}`,\n\t\t\trecommendedActions: [\n\t\t\t\t`Try using a totally different password`\n\t\t\t],\n\t\t\tdescription: `This happens when a admin tries to use a password they already changed for some reason in the past`\n\t\t};\n\t},\n\tcouldNotSendOtp: {\n\t\tstatusCode: HttpStatusCode.FailedDependency,\n\t\tcode: 'COULD_NOT_SEND_OTP_TO_RESERVE_EMAIL',\n\t\tmessage: `Your account was created but we couldn't send you an OTP`,\n\t\trecommendedActions: [\n\t\t\t`Login and try again in a few minutes`\n\t\t]\n\t}\n};\n\nexport const ReserveEmailEndpoint: Endpoint = {\n    path: '',\n    fullPath: '/customers',\n    parentModule: '/customers',\n    method: HttpMethods.Post\n}","import { Endpoint, HttpMethods } from \"../../generic\";\n\nexport const GetAccessTokenEndpoint: Endpoint = {\n    path: '/auth/token',\n    fullPath: '/customers/auth/token',\n    parentModule: '/customers',\n    method: HttpMethods.Get\n}","import { HttpStatusCode } from \"axios\";\nimport { BazeError, Endpoint, HttpMethods } from \"../../generic\";\n\nexport interface IRequestPasswordResetPayload {\n    phoneNumber: string;\n}\nexport interface IResetPasswordPayload {\n    password: string;\n    confirmPassword: string;\n}\n\nexport const ResetPasswordErrors: {\n    confirmPasswordMismatch: BazeError;\n    lateResetRequest: BazeError;\n} = {\n    confirmPasswordMismatch: {\n        statusCode: HttpStatusCode.BadRequest,\n        code: 'CONFIRM_PASSWORD_MISMATCH',\n        message: `Your password and confirm password don't match`,\n        recommendedActions: [\n            `Ensure both passwords you're providing match`\n        ]\n    },\n    lateResetRequest: {\n        statusCode: HttpStatusCode.ExpectationFailed,\n        code: 'LATE_RESET_REQUEST',\n        message: `We couldn't find an otp verification to verify your password reset`,\n        recommendedActions: [\n            `Restart the process`,\n            `Make sure you reset your password within 5 minutes of verifying the otp you're sent`\n        ]\n    }\n}\n\nexport const ResetPasswordEndpoint: Endpoint = {\n    path: '/auth/passwords',\n    fullPath: '/customers/auth/passwords',\n    parentModule: '/customers',\n    method: HttpMethods.Patch\n}\n\nexport const ForgotPasswordEndpoint: Endpoint = {\n    path: '/auth/passwords',\n    fullPath: '/customers/auth/passwords',\n    parentModule: '/customers',\n    method: HttpMethods.Post\n}","import {IStore, IStoreConfig} from \"../models\";\nimport {BazeError, Endpoint, HttpMethods} from \"../../generic\";\nimport {HttpStatusCode} from \"axios\";\n\nexport type IRawStoreConfig = Omit<IStoreConfig, \"createdAt\" | \"_id\" | \"updatedAt\" | \"_deletedAt\">\n\nexport interface ICreateStorePayload {\n    name: string;\n    email: string;\n    contactNumber: string;\n    logo: string;\n    heroBg: string;\n    allowsMessaging: string;\n    heroSectionText: string;\n    shippingAndRefundPolicy: string;\n    address: string;\n    config: Array<IRawStoreConfig>;\n}\n\nexport interface ICreateStoreResponse {\n    store: IStore;\n}\n\nexport const CreateStoreErrors: {\n    noSuchAttribute: BazeError;\n    attributeHasNoSuchOption: ( attrName: string ) => BazeError;\n    requiredAttributeNotProvided: BazeError;\n} = {\n    noSuchAttribute: {\n        statusCode: HttpStatusCode.BadRequest,\n        code: \"NO_SUCH_ATTRIBUTE\",\n        message: `This attribute does not exist`\n    },\n    attributeHasNoSuchOption: ( attrName: string ) => {\n        return {\n            statusCode: HttpStatusCode.BadRequest,\n            code: \"ATTRIBUTE_HAS_NO_SUCH_OPTION\",\n            message: `Attribute ${ attrName } does not accommodate some options provided for it`\n        };\n    },\n    requiredAttributeNotProvided: {\n        statusCode: HttpStatusCode.BadRequest,\n        code: \"REQUIRED_ATTRIBUTE_NOT_PROVIDED\",\n        message: 'Required attribute(s) not provided',\n        recommendedActions: [\n            'Please provide all required attributes'\n        ]\n    }\n};\n\nexport const CreateStoreEndpoint: Endpoint = {\n    path: '/stores',\n    fullPath: '/stores',\n    parentModule: '/stores',\n    method: HttpMethods.Post\n}"],"mappings":"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","names":["HttpMethods","OtpContext","CustomerAccountStatus","HttpStatusCode","HttpStatusCode","HttpStatusCode","HttpStatusCode","HttpStatusCode","HttpStatusCode","HttpStatusCode","HttpStatusCode","HttpStatusCode"]}